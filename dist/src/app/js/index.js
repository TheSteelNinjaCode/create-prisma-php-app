var eventAttributes=["onclick","ondblclick","onmousedown","onmouseup","onmouseover","onmousemove","onmouseout","onwheel","onkeypress","onkeydown","onkeyup","onfocus","onblur","onchange","oninput","onselect","onsubmit","onreset","onresize","onscroll","onload","onunload","onabort","onerror","onbeforeunload","oncopy","oncut","onpaste","ondrag","ondragstart","ondragend","ondragover","ondragenter","ondragleave","ondrop","oncontextmenu","ontouchstart","ontouchmove","ontouchend","ontouchcancel","onpointerdown","onpointerup","onpointermove","onpointerover","onpointerout","onpointerenter","onpointerleave","onpointercancel"];document.addEventListener("DOMContentLoaded",attachWireFunctionEvents);var state={checkedElements:new Set},responseData=null,store=null,isNavigating=!1;function attachWireFunctionEvents(){handleHiddenAttribute();document.querySelectorAll("button, input, select, textarea, a, form, label, div, span").forEach((e=>{if(handleAnchorTag(e),eventAttributes.forEach((t=>{const n=e.getAttribute(t),a=t.slice(2);n&&(e.removeAttribute(t),handleDebounce(e,a,n))})),e instanceof HTMLFormElement){const t=e.getAttribute("onsubmit");t&&(e.removeAttribute("onsubmit"),handleDebounce(e,"submit",t))}})),initializePpOnListeners()}function hasPpOnAttribute(e){const t=e.attributes;if(!t)return!1;for(let e=0;e<t.length;e++){const n=t[e].name;if(n.startsWith("pp-on:")||n.startsWith("data-pp-on:")||n.startsWith("pp-on-")||n.startsWith("data-pp-on-"))return!0}return!1}function findAllPpOnElements(e){const t=[];if(hasPpOnAttribute(e)&&t.push(e),document.evaluate){const n=document.evaluate('.//*[@*[starts-with(name(), "pp-on:") or starts-with(name(), "data-pp-on:") or starts-with(name(), "pp-on-") or starts-with(name(), "data-pp-on-")]]',e,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);let a=n.iterateNext();for(;a;)t.push(a),a=n.iterateNext()}else if("function"==typeof e.getElementsByTagName){const n=e.getElementsByTagName("*");for(let e=0;e<n.length;e++)hasPpOnAttribute(n[e])&&t.push(n[e])}return t}function initializePpOnListeners(){findAllPpOnElements(document).forEach((e=>{Array.from(e.attributes).forEach((t=>{if(t.name.startsWith("pp-on:")){const n=t.name.split(":")[1],a=t.value;a&&e.addEventListener(n,(t=>{try{new Function("event",a).call(e,t)}catch(e){}}))}}))}))}function handleHiddenAttribute(){const e=document.querySelectorAll("[pp-visibility]"),t=document.querySelectorAll("[pp-display]");e.forEach((e=>handleVisibilityElementAttribute(e,"pp-visibility",handleElementVisibility))),t.forEach((e=>handleVisibilityElementAttribute(e,"pp-display",handleElementDisplay)))}function handleVisibilityElementAttribute(e,t,n){const a=e.getAttribute(t);if(a)if(isJsonLike(a)){n(e,parseJson(a))}else{const n=parseTime(a);if(n>0){const a="pp-visibility"===t?"visibility":"display";scheduleChange(e,n,a,"visibility"===a?"hidden":"none")}}}function isJsonLike(e){return e.trim().startsWith("{")&&e.trim().endsWith("}")}function handleElementVisibility(e,t){handleElementChange(e,t,"visibility","hidden","visible")}function handleElementDisplay(e,t){handleElementChange(e,t,"display","none","block")}function handleElementChange(e,t,n,a,s){const o=t.start?parseTime(t.start):0,c=t.end?parseTime(t.end):0;o>0?(e.style[n]=a,scheduleChange(e,o,n,s),c>0&&scheduleChange(e,o+c,n,a)):c>0&&scheduleChange(e,c,n,a)}function scheduleChange(e,t,n,a){setTimeout((()=>{requestAnimationFrame((()=>{e.style[n]=a}))}),t)}function parseTime(e){if("number"==typeof e)return e;const t=e.match(/^(\d+)(ms|s|m)?$/);if(t){const e=parseInt(t[1],10);switch(t[2]||"ms"){case"ms":return e;case"s":return 1e3*e;case"m":return 60*e*1e3;default:return e}}return 0}async function handleDebounce(e,t,n){const a=e.getAttribute("pp-debounce")||"",s=e.getAttribute("pp-beforeRequest")||"",o=e.getAttribute("pp-afterRequest")||"",c=async t=>{t.preventDefault();try{s&&await invokeHandler(e,s,t),await invokeHandler(e,n,t),o&&"@close"!==o&&await invokeHandler(e,o,t)}catch(e){}};if(a){const n=debounce(c,parseTime(a));e instanceof HTMLFormElement&&"submit"===t?e.addEventListener(t,(e=>{e.preventDefault(),n(e)})):e.addEventListener(t,n)}else e.addEventListener(t,c)}async function invokeHandler(e,t,n){try{const a=t.match(/^(\w+(\.\w+)*)\((.*)\)$/);if(a){const s=a[1].split("."),{context:o,methodName:c}=resolveContext(s);"function"==typeof o[c]?new Function("event",t).call(e,n):await handleParsedCallback(e,t)}else await handleParsedCallback(e,t)}catch(e){}}function resolveContext(e){let t=window;for(let n=0;n<e.length-1;n++)if(t=t[e[n]],!t)throw new Error(`Cannot find object ${e[n]} in the context.`);return{context:t,methodName:e[e.length-1]}}async function handleParsedCallback(e,t){const{funcName:n,data:a}=parseCallback(e,t);if(!n)return;const s=window[n];if("function"==typeof s){const t=e.hasAttribute("pp-afterRequest"),n=Array.isArray(a.args)?a.args:[],o=responseData?parseJson(responseData):{response:responseData};let c={args:n,element:e,data:a};t&&(c={...c,...o}),await s(c)}else responseData=null,responseData=await handleUndefinedFunction(e,n,a)}function handleAnchorTag(e){e instanceof HTMLAnchorElement&&e.addEventListener("click",(async e=>{const t=e.currentTarget,n=t.getAttribute("href"),a=t.getAttribute("target");if(n&&"_blank"!==a&&!e.metaKey&&!e.ctrlKey&&(e.preventDefault(),!isNavigating)){isNavigating=!0;try{/^(https?:)?\/\//i.test(n)&&!n.startsWith(window.location.origin)?window.location.href=n:(history.pushState(null,"",n),await handleNavigation())}catch(e){}finally{isNavigating=!1}}}))}async function handleNavigation(){try{const e=await pphpFetch(window.location.href);if(e.includes("redirect_7F834=")){const t=e.split("=")[1];await handleRedirect(t)}else updateDocumentContent(e)}catch(e){}}function updateDocumentContent(e){const t=saveScrollPositions();if(e.includes("<!DOCTYPE html>")){const t=e=>{Array.from(e.head.children).forEach((e=>{if("META"===e.tagName){if(e.getAttribute("charset")||"viewport"===e.getAttribute("name"))return;const t=e.name,n=e.getAttribute("property");let a=null;t?a=document.head.querySelector(`meta[name="${t}"]`):n&&(a=document.head.querySelector(`meta[property="${n}"]`)),a?document.head.replaceChild(e.cloneNode(!0),a):document.head.appendChild(e.cloneNode(!0))}else if("TITLE"===e.tagName){const t=document.head.querySelector("title");t?document.head.replaceChild(e.cloneNode(!0),t):document.head.appendChild(e.cloneNode(!0))}})),document.body.innerHTML="",loadAndValidateContent(e)};t((new DOMParser).parseFromString(e,"text/html"))}else{saveState();const t=(new DOMParser).parseFromString(e,"text/html");document.body.innerHTML="",loadAndValidateContent(t),restoreState()}restoreScrollPositions(t),document.dispatchEvent(new Event("DOMContentLoaded"))}function loadAndValidateContent(e){Array.from(e.body.children).forEach((e=>{switch(e.tagName){case"SCRIPT":const t=document.createElement("script"),n=e;n.src?t.src=n.src:t.textContent=n.textContent,document.body.appendChild(t);break;case"STYLE":const a=document.createElement("style");a.textContent=e.textContent,document.body.appendChild(a);break;case"IFRAME":const s=document.createElement("iframe"),o=e;s.src=o.src,s.width=o.width,s.height=o.height,s.name=o.name,o.allowFullscreen&&(s.allowFullscreen=!0);const c=o.getAttribute("frameBorder");null!==c&&(s.style.border="0"===c?"none":""),document.body.appendChild(s);break;case"LINK":const r=document.createElement("link"),i=e;r.rel=i.rel,r.href=i.href,document.head.appendChild(r);break;case"META":const l=document.createElement("meta"),u=e;l.name=u.name,l.content=u.content,document.head.appendChild(l);break;case"OBJECT":const d=document.createElement("object"),p=e;d.data=p.data,d.type=p.type,document.body.appendChild(d);break;case"EMBED":const m=document.createElement("embed"),f=e;m.src=f.src,m.type=f.type,document.body.appendChild(m);break;case"VIDEO":const h=document.createElement("video"),b=e;h.src=b.src,h.width=b.width,h.height=b.height,h.controls=b.controls,document.body.appendChild(h);break;case"AUDIO":const E=document.createElement("audio"),y=e;E.src=y.src,E.controls=y.controls,document.body.appendChild(E);break;case"SOURCE":const g=document.createElement("source"),T=e;g.src=T.src,g.type=T.type;const A=document.body.lastElementChild;A instanceof HTMLVideoElement||A instanceof HTMLAudioElement?A.appendChild(g):document.body.appendChild(g);break;case"PICTURE":const v=document.createElement("picture"),L=e;Array.from(L.children).forEach((e=>{v.appendChild(e.cloneNode(!0))})),document.body.appendChild(v);break;case"NOSCRIPT":const S=document.createElement("noscript");S.textContent=e.innerHTML,document.body.appendChild(S);break;case"TEMPLATE":const M=e;document.body.appendChild(M.content.cloneNode(!0));break;default:document.body.appendChild(e.cloneNode(!0));break}}))}function saveState(){const e=document.activeElement;state.focusId=e?.id||e?.name,state.focusValue=e?.value,state.focusChecked=e?.checked,state.focusType=e?.type,state.focusSelectionStart=e?.selectionStart,state.focusSelectionEnd=e?.selectionEnd,state.isSuspense=e.hasAttribute("pp-suspense"),state.checkedElements.clear(),document.querySelectorAll('input[type="checkbox"]:checked').forEach((e=>{state.checkedElements.add(e.id||e.name)})),document.querySelectorAll('input[type="radio"]:checked').forEach((e=>{state.checkedElements.add(e.id||e.name)}))}function restoreState(){if(state.focusId){const e=document.getElementById(state.focusId)||document.querySelector(`[name="${state.focusId}"]`);if(e instanceof HTMLInputElement){const t=e.value.length||0;if(void 0!==state.focusSelectionStart&&null!==state.focusSelectionEnd&&e.setSelectionRange(t,t),state.focusValue)if("checkbox"===e.type||"radio"===e.type)e.checked=!!state.focusChecked;else if("number"===e.type)e.type="text",e.setSelectionRange(t,t),e.type="number";else{e.hasAttribute("pp-suspense")||state.isSuspense||(e.value=state.focusValue)}e.focus()}else if(e instanceof HTMLTextAreaElement){const t=e.value.length||0;if(void 0!==state.focusSelectionStart&&null!==state.focusSelectionEnd&&e.setSelectionRange(t,t),state.focusValue){e.hasAttribute("pp-suspense")||state.isSuspense||(e.value=state.focusValue)}e.focus()}else if(e instanceof HTMLSelectElement){if(state.focusValue){e.hasAttribute("pp-suspense")||state.isSuspense||(e.value=state.focusValue)}e.focus()}}state.checkedElements.forEach((e=>{const t=document.getElementById(e);t&&(t.checked=!0)}))}function saveScrollPositions(){const e={};return document.querySelectorAll("*").forEach((t=>{(t.scrollTop||t.scrollLeft)&&(e[getElementKey(t)]={scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})})),e}function restoreScrollPositions(e){document.querySelectorAll("*").forEach((t=>{const n=getElementKey(t);e[n]&&(t.scrollTop=e[n].scrollTop,t.scrollLeft=e[n].scrollLeft)}))}function getElementKey(e){return e.id||e.className||e.tagName}async function pphpFetch(e,t){const n=await fetch(e,{...t,headers:{...t?.headers,"X-Requested-With":"XMLHttpRequest"}});return await n.text()}function parseCallback(e,t){let n={};const a=e.closest("form");if(a){new FormData(a).forEach(((e,t)=>{n[t]?Array.isArray(n[t])?n[t].push(e):n[t]=[n[t],e]:n[t]=e}))}else e instanceof HTMLInputElement?n=handleInputElement(e):(e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement)&&(n[e.name]=e.value);const s=t.match(/(\w+)\((.*)\)/);if(s){const e=s[1];let t=s[2].trim();if(t.startsWith("{")&&t.endsWith("}"))try{const e=parseJson(t);"object"==typeof e&&null!==e&&(n={...n,...e})}catch(e){}else{const e=t.split(/,(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/).map((e=>e.trim().replace(/^['"]|['"]$/g,"")));n.args=e}return{funcName:e,data:n}}return{funcName:t,data:n}}function handleInputElement(e){let t={};if(e.name)if("checkbox"===e.type)t[e.name]={value:e.value,checked:e.checked};else if("radio"===e.type){const n=document.querySelector(`input[name="${e.name}"]:checked`);t[e.name]=n?n.value:null}else t[e.name]=e.value;else"checkbox"===e.type||"radio"===e.type?t.value=e.checked:t.value=e.value;return t}function updateElementAttributes(e,t){for(const n in t)if(t.hasOwnProperty(n))switch(n){case"innerHTML":case"outerHTML":case"textContent":case"innerText":e[n]=decodeHTML(t[n]);break;case"insertAdjacentHTML":e.insertAdjacentHTML(t.position||"beforeend",decodeHTML(t[n].html));break;case"insertAdjacentText":e.insertAdjacentText(t.position||"beforeend",decodeHTML(t[n].text));break;case"setAttribute":e.setAttribute(t.attrName,decodeHTML(t[n]));break;case"removeAttribute":e.removeAttribute(t[n]);break;case"className":e.className=decodeHTML(t[n]);break;case"classList.add":e.classList.add(...decodeHTML(t[n]).split(","));break;case"classList.remove":e.classList.remove(...decodeHTML(t[n]).split(","));break;case"classList.toggle":e.classList.toggle(decodeHTML(t[n]));break;case"classList.replace":const[a,s]=decodeHTML(t[n]).split(",");e.classList.replace(a,s);break;case"dataset":e.dataset[t.attrName]=decodeHTML(t[n]);break;case"style":Object.assign(e.style,t[n]);break;case"value":e.value=decodeHTML(t[n]);break;case"checked":e.checked=t[n];break;default:e.setAttribute(n,decodeHTML(t[n]))}}function decodeHTML(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}function saveElementOriginalState(e){if(e.hasAttribute("pp-suspense")&&!e.hasAttribute("pp-original-state")){const t={};e.textContent&&(t.textContent=e.textContent.trim()),(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&(t.value=e.value);for(let n=0;n<e.attributes.length;n++){const a=e.attributes[n];t[a.name]=a.value}e.setAttribute("pp-original-state",JSON.stringify(t))}e.querySelectorAll("[pp-suspense]").forEach((e=>saveElementOriginalState(e)))}async function handleSuspenseElement(e){let t=e.getAttribute("pp-suspense")||"";const n=(e,t)=>{for(const n in t)if(t.hasOwnProperty(n))for(const t of e.elements)if(t instanceof HTMLInputElement||t instanceof HTMLButtonElement||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement){const e=t.getAttribute("pp-suspense")||"";if(e)if(isJsonLike(e)){const n=parseJson(e);"disabled"!==n.onsubmit&&updateElementAttributes(t,n)}else a(t,e)}},a=(e,t)=>{e instanceof HTMLInputElement?e.value=t:e.textContent=t};try{if(t&&isJsonLike(t)){const a=parseJson(t);if(a)if(e instanceof HTMLFormElement){const t=new FormData(e),s={};t.forEach(((e,t)=>{s[t]=e})),a.disabled&&toggleFormElements(e,!0);const{disabled:o,...c}=a;updateElementAttributes(e,c),n(e,s)}else if(a.targets){a.targets.forEach((e=>{const{id:t,...a}=e,s=document.querySelector(t);s&&((e,t)=>{e instanceof HTMLFormElement?n(e,t):updateElementAttributes(e,t)})(s,a)}));const{targets:t,...s}=a;updateElementAttributes(e,s)}else{if("disabled"===a.empty&&""===e.value)return;const{empty:t,...n}=a;updateElementAttributes(e,n)}}else if(t)a(e,t);else if(e instanceof HTMLFormElement){const t=new FormData(e),a={};t.forEach(((e,t)=>{a[t]=e})),n(e,a)}}catch(e){}}function restoreSuspenseElement(e){const t=e.getAttribute("pp-original-state");if(e.hasAttribute("pp-suspense")&&t){const n=(e,t)=>{const n=document.createElement(e.tagName);for(const a in t)t.hasOwnProperty(a)&&("textContent"===a?(e.textContent="",n.textContent=t[a]):"disabled"===a?!0===t[a]?n.setAttribute("disabled","true"):n.removeAttribute("disabled"):n.setAttribute(a,t[a]));for(;e.firstChild;)n.appendChild(e.firstChild);return e.replaceWith(n),n},a=(e,t)=>{for(const a in t)if(t.hasOwnProperty(a))for(const t of Array.from(e.elements))if(t instanceof HTMLInputElement||t instanceof HTMLButtonElement||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement){const e=t.getAttribute("pp-original-state")||"";if(e){if(isJsonLike(e)){const a=parseJson(e),s=n(t,a);t.replaceWith(s)}else s(t,e);t.removeAttribute("pp-original-state")}}},s=(e,t)=>{e instanceof HTMLInputElement?e.value=t:e.textContent=t},o=(e,t)=>{if(e instanceof HTMLFormElement)a(e,t);else{const a=n(e,t);e.replaceWith(a)}};try{const s=JSON.parse(t);if(s)if(e instanceof HTMLFormElement){const t=new FormData(e),n={};if(t.forEach(((e,t)=>{n[t]=e})),a(e,n),e.hasAttribute("pp-suspense")){const t=e.getAttribute("pp-suspense")||"";if(parseJson(t).disabled)for(const t of Array.from(e.elements))(t instanceof HTMLInputElement||t instanceof HTMLButtonElement||t instanceof HTMLTextAreaElement||t instanceof HTMLSelectElement)&&t.removeAttribute("disabled")}}else if(s.targets){s.targets.forEach((e=>{const{id:t,...n}=e,a=document.querySelector(t);a&&o(a,n)}));const{targets:t,...a}=s,c=n(e,a);e.replaceWith(c)}else{const{empty:t,...a}=s,o=n(e,a);e.replaceWith(o)}}catch(e){}}e.querySelectorAll("[pp-suspense]").forEach((e=>restoreSuspenseElement(e))),e.removeAttribute("pp-original-state")}function parseJson(e){return isJsonLike(e)?JSON.parse(e.replace(/'/g,'"')):null}function toggleFormElements(e,t){Array.from(e.elements).forEach((e=>{(e instanceof HTMLInputElement||e instanceof HTMLButtonElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement)&&(e.disabled=t)}))}async function handleUndefinedFunction(e,t,n){const a={callback:t,...n},s={method:"POST",headers:{"Content-Type":"application/json",HTTP_PPHP_WIRE_REQUEST:"true"},body:JSON.stringify(a)},o={method:"POST",headers:{"Content-Type":"application/json",HTTP_PPHP_WIRE_REQUEST:"true"},body:JSON.stringify({secondRequestC69CD:!0})};try{saveElementOriginalState(e),handleSuspenseElement(e);const t=window.location.pathname;let n=await pphpFetch(t,s);const a=extractJson(n)||"",c=a?JSON.parse(a):{},r=hasPpOnAttribute(e),i=e.getAttribute("pp-beforeRequest")||"",l=e.getAttribute("pp-afterRequest")||"";if((r||i||l&&c.success)&&restoreSuspenseElement(e),r||i){let e="";if(c.success){e=n.replace(a,"")}else e=n;return void appendAfterbegin(e)}if(l&&c.success){handleAfterRequest(l,a);return appendAfterbegin(n.replace(a,"")),a}const u=await pphpFetch(t,o);if(n.includes("redirect_7F834=")){const e=n.split("=")[1];await handleRedirect(e)}else{const e=(new DOMParser).parseFromString(u,"text/html");let t=document.createElement("div");if(t.id="afterbegin-8D95D",a)if(c.success){const e=n.replace(a,"");t.innerHTML=e}else t.innerHTML=n;else t.innerHTML=n;e.body.insertAdjacentElement("afterbegin",t),updateDocumentContent(e.body.outerHTML)}}catch(e){}}function appendAfterbegin(e){if(!e)return;let t=document.getElementById("afterbegin-8D95D");t?(t.innerHTML=e,document.body.insertAdjacentElement("afterbegin",t)):(t=document.createElement("div"),t.id="afterbegin-8D95D",t.innerHTML=e,document.body.insertAdjacentElement("afterbegin",t))}function extractJson(e){const t=e.match(/\{.*\}/);return t?t[0]:null}function handleStateManager(e){const t=e.stateManager_7BB9D;if(!t)return;const n=JSON.stringify(t.state);localStorage.setItem("stateManager_7BB9D",n)}function handleAfterRequest(e,t){if(!isJsonLike(e))return;const n=parseJson(e),a=t?parseJson(t):null,s=n.targets;Array.isArray(s)&&s.forEach((e=>{const{id:t,...n}=e,s=document.querySelector(t);let o={};if(a){for(const t in n)if(n.hasOwnProperty(t))switch(t){case"innerHTML":case"outerHTML":case"textContent":case"innerText":"response"===n[t]&&(o[t]=e.responseKey?a[e.responseKey]:a.response);break;default:o[t]=n[t];break}}else o=n;s&&updateElementAttributes(s,o)}))}async function handleRedirect(e){if(e)try{history.pushState(null,"",e),await handleNavigation()}catch(e){}}function debounce(e,t=300,n=!1){let a;return function(...s){const o=this;a&&clearTimeout(a),a=setTimeout((()=>{a=null,n||e.apply(o,s)}),t),n&&!a&&e.apply(o,s)}}function copyCode(e,t,n,a,s=2e3){if(!(e instanceof HTMLElement))return;const o=e.closest(`.${t}`)?.querySelector("pre code"),c=o?.textContent?.trim()||"";c?navigator.clipboard.writeText(c).then((()=>{const t=e.querySelector("i");t&&(t.className=a),setTimeout((()=>{t&&(t.className=n)}),s)}),(()=>{alert("Failed to copy command to clipboard")})):alert("Failed to find the code block to copy")}if(window.addEventListener("popstate",(async()=>{await handleNavigation()})),null===store){class e{static instance=null;state;listeners;constructor(e={}){this.state=e,this.listeners=[]}static getInstance(t={}){return e.instance||(e.instance=new e(t),e.instance.loadState()),e.instance}setState(e){this.state={...this.state,...e},this.listeners.forEach((e=>e(this.state))),this.saveState()}subscribe(e){return this.listeners.push(e),e(this.state),()=>{this.listeners=this.listeners.filter((t=>t!==e))}}saveState(){localStorage.setItem("appState_59E13",JSON.stringify(this.state))}loadState(){const e=localStorage.getItem("appState_59E13");e&&(this.state=JSON.parse(e),this.listeners.forEach((e=>e(this.state))))}resetState(){this.state={},this.listeners.forEach((e=>e(this.state))),localStorage.removeItem("appState_59E13")}}store=e.getInstance()}